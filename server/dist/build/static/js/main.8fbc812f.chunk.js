(this["webpackJsonpfpl-basket"]=this["webpackJsonpfpl-basket"]||[]).push([[0],{165:function(e,t,n){"use strict";n.r(t);var a=n(213),r=n(223),c=n(47),i=n.n(c),s=n(23),l=n(64),j=function(e){if(!e)return"";var t=(e.first_name.length<10?e.first_name:e.first_name.split(" ")[0])+" "+e.second_name;return t.length<20?t:e.web_name},u=function(e){return e?e.web_name:""},o=function(e){switch(e.element_type){case 1:return"GKP";case 2:return"DEF";case 3:return"MID";case 4:return"FWD";default:return""}},d=function(e){return e?e.element_type:0},b=function(e,t){return t[e.team-1].short_name||"no"},x=function(e,t){var n=t.elements[e];return!!n&&n.explain.map((function(e){var n=t.fixtures[e.fixture];return!(null===n||void 0===n?void 0:n.finished)})).includes(!0)},h=function(e,t){var n=t.filter((function(t){return x(t.element,e)})),a=t.filter((function(e){return e.multiplier>0}));return(a.length-n.length).toString()+"/"+a.length.toString()},O=n(9),m=n(1),p=n(0),f={bssData:null,leagueData:null,gwsData:[],selectedGw:"",liveData:null},g=Object(m.createContext)([f,function(){return f}]),v=function(e){var t=e.reducer,n=e.children,a=Object(m.useReducer)(t,f),r=Object(O.a)(a,2),c=r[0],i=r[1];return Object(p.jsx)(g.Provider,{value:[c,i],children:n})},y=function(){return Object(m.useContext)(g)},_=n(18),w=n.n(_),D=n(29),S=n(212),E=n(224),k=n(83),T=n(225),C=n(219),P=n(229),A=n(107),I=n.n(A),L=n(206),G=n(68),B=n.n(G),F="/api",M=function(){var e=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("".concat(F,"/data"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("".concat(F,"/league"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("".concat(F,"/live"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("".concat(F,"/team"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=y(),t=Object(O.a)(e,2),n=t[0].selectedGw,a=t[1],r=Object(m.useState)(!1),c=Object(O.a)(r,2),i=c[0],s=c[1],l=Object(m.useState)(""),j=Object(O.a)(l,2),u=j[0],o=j[1],d=Object(m.useState)(n),b=Object(O.a)(d,2),x=b[0],h=b[1],f=Object(m.useState)(!1),g=Object(O.a)(f,2),v=g[0],_=g[1],S=function(){var e=Object(D.a)(w.a.mark((function e(t,n){var r,c,i,s,l,j;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r={gw:t.toString()},e.next=6,R(r);case 6:200==(c=e.sent).status&&c.data&&(i=c.data,a({type:"SET_LIVE_ELEMENTS",payload:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("error:",e.t0);case 13:return e.prev=13,_(!0),s={gw:t.toString(),leagueId:n},e.next=18,W(s);case 18:200==(l=e.sent).status&&l.data&&(j=l.data,x&&a({type:"SET_SELECTED_GW",payload:x}),window.localStorage.setItem("usersPreviousLeagueID",n),a({type:"SET_LEAGUE_DATA",payload:j}),_(!1)),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(13),alert("No league found or FPL is being updated"),_(!1);case 26:case"end":return e.stop()}}),e,null,[[2,10],[13,22]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){var e=window.localStorage.getItem("usersPreviousLeagueID");e&&o(e)}),[]),Object(m.useEffect)((function(){h(n);var e=window.location.pathname.match(/[0-9]/g);e&&S(parseInt(n),e.join("").toString())}),[n]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a,{sx:{my:4},style:{display:"flex",marginTop:"10%"},children:Object(p.jsx)("img",{src:"/images/logo512.png",alt:"logo",style:{margin:"auto",maxWidth:"500px",width:"75%"}})}),Object(p.jsxs)(L.a,{sx:{my:4},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(L.a,{style:{width:300,height:20},children:i?Object(p.jsx)("img",{src:"/images/urlpic.png",alt:"urlpic",style:{maxWidth:300}}):null}),Object(p.jsx)(T.a,{margin:"normal",variant:"filled",style:{width:300},children:Object(p.jsx)(C.a,{InputProps:{endAdornment:Object(p.jsx)(L.a,{children:Object(p.jsx)(I.a,{style:{cursor:"pointer"},onClick:function(){return s(!i)}})})},id:"leagueId",onKeyPress:function(e){"Enter"===e.key&&S(parseInt(x),u)},value:u,label:"League ID",onChange:function(e){return o(e.target.value)}})}),Object(p.jsx)(P.a,{style:{marginTop:15},disabled:v,size:"large",variant:"contained",onClick:function(){return S(parseInt(x),u)},children:v?"Loading...":"Go!"})]})]})},N=n(234),z=n(236),J=n(237),K=n(238),q=n(239),H=n(230),Q=n(231),X=n(232),Y=n(233),Z=function(e){var t=e.children,n=e.header,a=void 0===n?null:n;return Object(p.jsx)(H.a,{variant:"elevation",style:{marginBottom:"20px",borderRadius:"5px"},children:Object(p.jsxs)(Q.a,{children:[a,Object(p.jsx)(X.a,{children:Object(p.jsx)(Y.a,{children:t})})]})})},$=function(){var e=y(),t=Object(O.a)(e,1)[0],n=t.bssData,a=t.leagueData;return n&&(null===a||void 0===a?void 0:a.parsedData)?Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Captains",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Captain"}),Object(p.jsx)(K.a,{children:"Owners"}),Object(p.jsx)(K.a,{children:"#"})]})}),Object(p.jsx)(q.a,{children:a.parsedData.captains.map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:u(n.elements[e.captain])}),Object(p.jsx)(K.a,{children:e.captainedBy.join(", ")}),Object(p.jsxs)(K.a,{children:[e.captainedBy.length," "]})]},e.captain)}))})]}):null},ee=function(e){switch(e){case"wildcard":return"Wildcard";case"3xc":return"Triple Captain";case"freehit":return"Freehit";case"bboost":return"Bench Boost";default:return""}},te=function(){var e=y(),t=Object(O.a)(e,1)[0],n=t.bssData,a=t.leagueData;return!n||!(null===a||void 0===a?void 0:a.parsedData)||a.parsedData.chips.length<1?null:Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Chips played",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Chip"}),Object(p.jsx)(K.a,{children:"Used by"})]})}),Object(p.jsx)(q.a,{children:a.parsedData.chips.map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:ee(e.chip)}),Object(p.jsx)(K.a,{children:e.usedBy.join(", ")})]},e.chip)}))})]})},ne=function(){var e=y(),t=Object(O.a)(e,1)[0].leagueData;return Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Team values",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Manager"}),Object(p.jsx)(K.a,{children:"Value"})]})}),Object(p.jsx)(q.a,{children:null===t||void 0===t?void 0:t.parsedData.managers.sort((function(e,t){return t.manager.gw_team.entry_history.value-e.manager.gw_team.entry_history.value})).map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:e.manager.player_name}),Object(p.jsx)(K.a,{children:(e.manager.gw_team.entry_history.value/10).toFixed(1)})]},e.manager.id)}))})]})},ae=n(240),re=n(241),ce=n(216),ie=n(242),se=n(235),le=n(244),je=n(243),ue=n(108),oe=n.n(ue),de=n(111),be=n.n(de),xe=n(110),he=n.n(xe),Oe=n(109),me=n.n(Oe),pe=n(17),fe=n(90),ge=n(51),ve="#13181F",ye=Object(fe.a)({palette:{mode:"dark",background:{default:"#171c24",paper:"#222b36"},primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:ge.a.A400}}}),_e={margin:"auto"},we=[{icon:Object(p.jsx)(oe.a,{style:_e}),text:"Main"},{icon:Object(p.jsx)(me.a,{style:_e}),text:"Transfers"},{icon:Object(p.jsx)(he.a,{style:_e}),text:"Standings"},{icon:Object(p.jsx)(be.a,{style:_e}),text:"Values"}],De=function(e){var t=e.page,n=e.setPage,a=y(),r=Object(O.a)(a,2),c=r[0],i=c.leagueData,s=c.selectedGw,l=c.gwsData,j=r[1];if(!(null===i||void 0===i?void 0:i.league_curr.managers))return null;var u=l[0].id.toString()==s,o=Object(pe.d)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ae.a,{position:"fixed",children:Object(p.jsxs)(re.a,{style:{background:ve},children:[Object(p.jsx)("img",{onClick:function(){j({type:"RESET_LEAGUE_DATA",payload:null}),o.push("/")},src:"/images/logo192.png",alt:"logo",style:{maxHeight:"75%",maxWidth:80,paddingBlock:7,cursor:"pointer"}}),Object(p.jsx)(S.a,{display:{xs:"none",md:"flex"},children:Object(p.jsx)(ce.a,{style:{marginLeft:15},value:t,onChange:function(e,t){n(t)},children:we.map((function(e){return Object(p.jsx)(ie.a,{value:e.text.toLowerCase(),icon:e.icon,label:e.text,disabled:"Standings"==e.text&&!u},e.text)}))})}),Object(p.jsx)(se.a,{style:{marginLeft:"auto"},variant:"h5",children:"".concat(null===i||void 0===i?void 0:i.league_curr.league.name).concat((null===i||void 0===i?void 0:i.league_curr.managers.length)>49?" (Top 50)":"",", Gameweek ").concat(s)})]})}),Object(p.jsx)(S.a,{display:{md:"none"},children:Object(p.jsx)(je.a,{style:{zIndex:999999999,background:ve,position:"fixed",bottom:0,left:0,right:0},value:t,onChange:function(e,t){n(t)},showLabels:!0,children:we.map((function(e){return Object(p.jsx)(le.a,{value:e.text.toLowerCase(),label:e.text,icon:e.icon},e.text)}))})})]})},Se=function(){var e=y(),t=Object(O.a)(e,1)[0],n=t.bssData,a=t.leagueData;if(!n||!a)return null;var r=Object(m.useState)(""),c=Object(O.a)(r,2),i=c[0],s=c[1];return Object(p.jsxs)(Z,{header:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(C.a,{fullWidth:!0,value:i||"",InputProps:{endAdornment:Object(p.jsx)(P.a,{variant:"text",onClick:function(){return s("")},children:"Clear"})},label:"Search from ".concat(a.parsedData.players.length," players..."),onChange:function(e){return s(e.target.value.toLowerCase())}})}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Player"}),Object(p.jsx)(K.a,{children:"Owners"}),Object(p.jsx)(K.a,{children:"#"})]})}),Object(p.jsx)(q.a,{children:function(e,t){return""==e?t:t.filter((function(t){return j(n.elements[t.player]).toLowerCase().includes(e)}))}(i,a.parsedData.players).map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:u(n.elements[e.player])}),Object(p.jsx)(K.a,{children:e.ownedBy.join(", ")}),Object(p.jsx)(K.a,{children:e.ownedBy.length})]},e.player)}))})]})},Ee=n(222),ke=n(246),Te=n(114),Ce=n.n(Te),Pe=n(115),Ae=n.n(Pe),Ie=n(113),Le=n.n(Ie),Ge=n(116),Be=n.n(Ge),Fe=n(245),Me=function(e){var t=e.manager,n=Object(m.useState)(),a=Object(O.a)(n,2),r=a[0],c=a[1];return Object(m.useEffect)((function(){var e=function(){var e=Object(D.a)(w.a.mark((function e(){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.entry.toString(),e.next=3,V({id:n});case 3:200==(a=e.sent).status&&a.data&&(r=a.data,c(r.filter((function(e){return e.active_chip}))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r?Object(p.jsx)(L.a,{children:Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Chips used",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"GW"}),Object(p.jsx)(K.a,{children:"Chip"})]})}),Object(p.jsx)(q.a,{children:null===r||void 0===r?void 0:r.filter((function(e){return e.active_chip})).map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:e.entry_history.event}),Object(p.jsx)(K.a,{children:ee(e.active_chip||"")})]},e.entry_history.event)}))})]})}):null},We=n(220),Re=n(214),Ve=n(217),Ue=function(e){var t=e.headerText,n=e.team1,a=e.team2,r=y(),c=Object(O.a)(r,1)[0].bssData;return Object(p.jsxs)(Ee.a,{xs:12,sm:6,md:4,item:!0,direction:"column",children:[Object(p.jsx)(se.a,{variant:"h6",children:t}),n.gw_team.picks.filter((function(e){return!a.gw_team.picks.map((function(e){return e.element})).includes(e.element)})).sort((function(e,t){return d(null===c||void 0===c?void 0:c.elements[e.element])-d(null===c||void 0===c?void 0:c.elements[t.element])})).map((function(e){return Object(p.jsx)(se.a,{variant:"body2",children:j((null===c||void 0===c?void 0:c.elements[e.element])||null)},e.element)}))]})},Ne=function(e){var t,n=e.manager,a=Object(m.useState)(null),r=Object(O.a)(a,2),c=r[0],i=r[1],s=y(),l=Object(O.a)(s,1)[0],u=l.leagueData,o=l.bssData;return Object(p.jsx)(L.a,{children:Object(p.jsx)(H.a,{variant:"elevation",style:{marginBottom:"20px",borderRadius:"5px"},children:Object(p.jsxs)(Q.a,{children:[Object(p.jsx)(N.a,{title:"Compare to",style:{textAlign:"center"}}),Object(p.jsxs)(T.a,{fullWidth:!0,children:[Object(p.jsx)(We.a,{id:"compare-id",children:"Select another manager"}),Object(p.jsx)(Re.a,{variant:"standard",labelId:"compare-id",id:"compare-select",label:"Compare to",onChange:function(e){var t=parseInt(e.target.value)||0,n=(null===u||void 0===u?void 0:u.parsedData.managers[t].manager)||null;i(n)},children:null===u||void 0===u||null===(t=u.parsedData)||void 0===t?void 0:t.managers.map((function(e,t){return Object(p.jsx)(Ve.a,{value:t,children:e.manager.player_name})}))})]}),n&&c?Object(p.jsx)(Ee.a,{container:!0,marginTop:5,children:Object(p.jsxs)(Ee.a,{item:!0,container:!0,display:"flex",justifyContent:"left",children:[Object(p.jsx)(Ue,{headerText:n.player_name,team1:n,team2:c}),Object(p.jsx)(Ue,{headerText:c.player_name,team1:c,team2:n}),Object(p.jsxs)(Ee.a,{xs:12,sm:6,md:4,item:!0,direction:"column",children:[Object(p.jsx)(se.a,{variant:"h6",children:"Mutual"}),c.gw_team.picks.filter((function(e){return n.gw_team.picks.map((function(e){return e.element})).includes(e.element)})).sort((function(e,t){return d(null===o||void 0===o?void 0:o.elements[e.element])-d(null===o||void 0===o?void 0:o.elements[t.element])})).map((function(e){return Object(p.jsx)(se.a,{variant:"body2",children:j((null===o||void 0===o?void 0:o.elements[e.element])||null)},e.element)}))]})]})}):null]})})})},ze=function(e){var t=e.manager,n=e.setManagerPage,a=y(),r=Object(O.a)(a,1)[0],c=r.bssData,i=r.liveData,s=r.selectedGw;return(null===c||void 0===c?void 0:c.elements)&&(null===i||void 0===i?void 0:i.elements)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Z,{header:Object(p.jsxs)(Ee.a,{container:!0,children:[Object(p.jsx)(Ee.a,{item:!0,xs:3,display:"flex",justifyContent:"left",alignItems:"center",children:Object(p.jsx)(P.a,{onClick:function(){return n(null)},variant:"contained",children:"Back"})}),Object(p.jsx)(Ee.a,{item:!0,xs:6,children:Object(p.jsx)(N.a,{title:t.manager.player_name,style:{textAlign:"center"}})}),Object(p.jsx)(Ee.a,{item:!0,xs:3,display:"flex",direction:"column",justifyContent:"center",alignItems:"center",children:Object(p.jsx)(Fe.a,{href:"https://fantasy.premierleague.com/entry/".concat(t.manager.entry,"/event/").concat(s,"/"),target:"_blank",rel:"noreferrer",children:Object(p.jsx)(P.a,{variant:"contained",children:"FPL"})})})]}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Player"}),Object(p.jsx)(K.a,{children:"Team"}),Object(p.jsx)(K.a,{children:"Position"}),Object(p.jsx)(K.a,{children:"Points"})]})}),Object(p.jsxs)(q.a,{children:[t.manager.gw_team.picks.filter((function(e){return e.multiplier>0})).map((function(e){var t;return Object(p.jsxs)(J.a,{children:[Object(p.jsxs)(K.a,{children:[j(c.elements[e.element]),e.is_captain?" (C)":"",e.is_vice_captain?" (V)":"",x(e.element,i)?" \ud83d\udfe2":" \ud83c\udfc1"]}),Object(p.jsx)(K.a,{children:b(c.elements[e.element],c.teams)}),Object(p.jsx)(K.a,{children:o(c.elements[e.element])}),Object(p.jsx)(K.a,{children:(null===(t=i.elements[e.element])||void 0===t?void 0:t.stats.total_points)||0*e.multiplier})]},e.element)})),0==t.manager.gw_team.entry_history.event_transfers_cost?null:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Transfers cost"}),Object(p.jsx)(K.a,{}),Object(p.jsx)(K.a,{}),Object(p.jsx)(K.a,{children:-1*t.manager.gw_team.entry_history.event_transfers_cost})]}),Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Total"}),Object(p.jsx)(K.a,{}),Object(p.jsx)(K.a,{}),Object(p.jsx)(K.a,{children:t.points})]})]})]}),Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Bench",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Player"}),Object(p.jsx)(K.a,{children:"Team"}),Object(p.jsx)(K.a,{children:"Position"}),Object(p.jsx)(K.a,{children:"Points"})]})}),Object(p.jsx)(q.a,{children:t.manager.gw_team.picks.filter((function(e){return 0==e.multiplier})).map((function(e){var t;return Object(p.jsxs)(J.a,{children:[Object(p.jsxs)(K.a,{children:[j(c.elements[e.element]),x(e.element,i)?" \ud83d\udfe2":" \ud83c\udfc1"]}),Object(p.jsx)(K.a,{children:b(c.elements[e.element],c.teams)}),Object(p.jsx)(K.a,{children:o(c.elements[e.element])}),Object(p.jsx)(K.a,{children:null===(t=i.elements[e.element])||void 0===t?void 0:t.stats.total_points})]},e.element)}))})]}),Object(p.jsx)(Me,{manager:t.manager}),Object(p.jsx)(Ne,{manager:t.manager})]}):null},Je=function(e){var t=e.gwPoints,n=e.totalPoints;return Object(p.jsxs)(L.a,{children:[Object(p.jsxs)(L.a,{children:[t," /"]}),Object(p.jsx)(L.a,{children:n})]})},Ke=function(e){var t=e.manager;return Object(p.jsxs)(L.a,{children:[Object(p.jsx)(Fe.a,{children:Object(p.jsx)(L.a,{children:t.entry_name})}),Object(p.jsx)(L.a,{children:t.player_name})]})},qe=function(e){var t=e.gwPoints,n=e.totalPoints,a=e.manager,r=e.setManagerPage,c=e.old_rank,i=e.i,s=void 0===i?1:i,l=y(),j=Object(O.a)(l,1)[0].liveData;if(!j)return null;return Object(p.jsxs)(J.a,{style:{cursor:"pointer"},onClick:function(){return r(a?{manager:a,points:t}:null)},children:[Object(p.jsx)(K.a,{children:function(){var e=c>s?0:c<s?2:1,t={marginRight:5,marginBlock:"auto"},n={marginBlock:"auto"},a=function(e,n){return Object(p.jsxs)(S.a,{display:"flex",children:[Object(p.jsx)(se.a,{style:t,variant:"button",children:e}),n]})};return a(s,0==e?Object(p.jsx)(Le.a,{color:"primary",style:n}):1==e?Object(p.jsx)(Ce.a,{color:"disabled",style:n}):Object(p.jsx)(Ae.a,{color:"error",style:n}))}()}),Object(p.jsx)(K.a,{children:Object(p.jsx)(Ke,{manager:a})}),Object(p.jsx)(K.a,{children:h(j,a.gw_team.picks.filter((function(e){return e.multiplier>0})))}),Object(p.jsx)(K.a,{children:Object(p.jsx)(Je,{gwPoints:t,totalPoints:n})})]},s)},He=function(e){var t=e.managers,n=e.setManagerPage,a=y(),r=Object(O.a)(a,1)[0].liveData,c=Object(m.useState)([]),i=Object(O.a)(c,2),j=i[0],u=i[1],o=t.map((function(e){return{id:e.manager.id,prev_points:e.manager.prev_points}})).sort((function(e,t){return t.prev_points-e.prev_points}));return(null===r||void 0===r?void 0:r.elements)?(Object(m.useEffect)((function(){var e,a=[],c=Object(l.a)(t);try{var i=function(){var t,c=e.value,i=c.manager.gw_team,s=c.manager.prev_points,j=-1*i.entry_history.event_transfers_cost,u=Object(l.a)(c.parsedPicks.active);try{for(u.s();!(t=u.n()).done;){var d,b=t.value,x=b.element;j+=((null===(d=r.elements[x])||void 0===d?void 0:d.stats.total_points)||0)*b.multiplier}}catch(h){u.e(h)}finally{u.f()}a.push({manager:c.manager,gwPoints:j,totalPoints:s+j,setManagerPage:n,old_rank:1+o.findIndex((function(e){return e.id===c.manager.id}))})};for(c.s();!(e=c.n()).done;)i()}catch(s){c.e(s)}finally{c.f()}a.sort((function(e,t){return t.totalPoints-e.totalPoints})),u(a)}),[r]),Object(p.jsx)(p.Fragment,{children:j.map((function(e,t){return Object(p.jsx)(qe,Object(s.a)(Object(s.a)({},e),{},{i:t+1}),t)}))})):null},Qe=function(){var e=y(),t=Object(O.a)(e,2),n=t[0],a=n.leagueData,r=n.selectedGw,c=t[1];if(!(null===a||void 0===a?void 0:a.parsedData))return null;var i=Object(m.useState)(null),s=Object(O.a)(i,2),l=s[0],j=s[1],u=Object(m.useState)(!1),o=Object(O.a)(u,2),d=o[0],b=o[1],x=function(){var e=Object(D.a)(w.a.mark((function e(){var t,n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t={gw:r},e.next=4,R(t);case 4:200==(n=e.sent).status&&n.data?(a=n.data,c({type:"SET_LIVE_ELEMENTS",payload:a})):alert("Refresh failed"),b(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l?Object(p.jsx)(ze,{setManagerPage:j,manager:l}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(Z,{header:Object(p.jsxs)(Ee.a,{container:!0,alignContent:"space-between",children:[Object(p.jsx)(Ee.a,{item:!0,xs:2,children:" "}),Object(p.jsx)(Ee.a,{item:!0,xs:8,children:Object(p.jsx)(N.a,{title:"Standings",style:{textAlign:"center"}})}),Object(p.jsx)(Ee.a,{container:!0,item:!0,xs:2,alignContent:"center",children:Object(p.jsx)(ke.a,{disabled:d,onClick:function(){return x()},style:{margin:"auto",cursor:"pointer"},children:Object(p.jsx)(Be.a,{fontSize:"large"})})})]}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Rank"}),Object(p.jsx)(K.a,{children:"Manager"}),Object(p.jsx)(K.a,{children:Object(p.jsx)(S.a,{children:"\ud83c\udfc1"})}),Object(p.jsx)(K.a,{children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(S.a,{children:"GW / "}),Object(p.jsx)(S.a,{children:"Tot "})]})})]})}),Object(p.jsx)(q.a,{children:Object(p.jsx)(He,{setManagerPage:j,managers:a.parsedData.managers})})]})})},Xe=function(){var e=y(),t=Object(O.a)(e,1)[0],n=t.bssData,a=t.leagueData,r=t.selectedGw;return n?Object(p.jsxs)(Z,{header:Object(p.jsx)(N.a,{title:"Transfers",style:{textAlign:"center"}}),children:[Object(p.jsx)(z.a,{children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:"Manager"}),Object(p.jsx)(K.a,{children:"In"}),Object(p.jsx)(K.a,{children:"Out"}),Object(p.jsx)(K.a,{children:"-"})]})}),Object(p.jsx)(q.a,{children:null===a||void 0===a?void 0:a.league_curr.managers.filter((function(e){return e.transfers.filter((function(e){return e.event===parseInt(r)})).length>0})).map((function(e){return Object(p.jsxs)(J.a,{children:[Object(p.jsx)(K.a,{children:e.player_name}),Object(p.jsx)(K.a,{children:"freehit"===e.gw_team.active_chip?"*Freehit*":"wildcard"===e.gw_team.active_chip?"*Wildcard*":e.transfers.filter((function(e){return e.event===parseInt(r)})).map((function(e){return u(n.elements[e.element_in])})).join(", ")}),Object(p.jsx)(K.a,{children:"freehit"===e.gw_team.active_chip?"*Freehit*":"wildcard"===e.gw_team.active_chip?"*Wildcard*":e.transfers.filter((function(e){return e.event===parseInt(r)})).map((function(e){return u(n.elements[e.element_out])})).join(", ")}),Object(p.jsx)(K.a,{children:0!==e.gw_team.entry_history.event_transfers_cost?e.gw_team.entry_history.event_transfers_cost:null})]},e.id)}))})]}):null},Ye=function(){var e=Object(m.useState)("main"),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(De,{page:n,setPage:a}),Object(p.jsx)(S.a,{paddingBottom:10,marginTop:20,children:function(e){switch(e){case"main":return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(te,{}),Object(p.jsx)($,{}),Object(p.jsx)(Se,{})]});case"transfers":return Object(p.jsx)(Xe,{});case"standings":return Object(p.jsx)(Qe,{});case"values":return Object(p.jsx)(ne,{});default:return null}}(n)})]})};function Ze(){var e=y(),t=Object(O.a)(e,2),n=t[0].leagueData,a=t[1];return Object(m.useEffect)((function(){var e=function(){var e=Object(D.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:200==(t=e.sent).status&&t.data?(n=t.data,a({type:"SET_BSS_DATA",payload:n})):alert("The game is being updated.");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(p.jsx)(k.a,{children:Object(p.jsx)(E.a,{maxWidth:"lg",children:Object(p.jsx)(S.a,{height:"100vh",children:n?Object(p.jsx)(Ye,{}):Object(p.jsx)(U,{})})})})}i.a.render(Object(p.jsxs)(r.a,{theme:ye,children:[Object(p.jsx)(a.a,{}),Object(p.jsx)(v,{reducer:function(e,t){switch(t.type){case"SET_BSS_DATA":var n=function(e){var t,n=e.filter((function(e){return e.finished})),a=Object(l.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=new Date-new Date(r.deadline_time);!r.finished&&c>12e5&&n.push(r)}}catch(i){a.e(i)}finally{a.f()}return n.reverse()}(t.payload.events);return Object(s.a)(Object(s.a)({},e),{},{bssData:Object(s.a)({},t.payload),gwsData:n,selectedGw:n[0].id.toString()});case"SET_LEAGUE_DATA":return Object(s.a)(Object(s.a)({},e),{},{leagueData:Object(s.a)({},t.payload)});case"RESET_LEAGUE_DATA":return Object(s.a)(Object(s.a)({},e),{},{leagueData:null});case"SET_SELECTED_GW":return Object(s.a)(Object(s.a)({},e),{},{selectedGw:t.payload});case"SET_LIVE_ELEMENTS":return Object(s.a)(Object(s.a)({},e),{},{liveData:t.payload});default:return e}},children:Object(p.jsx)(Ze,{})})]}),document.querySelector("#root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.8fbc812f.chunk.js.map